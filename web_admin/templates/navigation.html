{% load permissions_filter %}
{% load menu_tags %}
{% block sidebar_panel %}
<div class="sidebar-panel offscreen-left">
    <div class="brand">
        <a href="javascript:;" class="toggle-sidebar hidden-xs hamburger-icon v3"
           data-toggle="layout-small-menu">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </a>
    </div>
    {% with request.resolver_match.url_name as url_name %}
    <nav role="navigation">
        <ul class="nav"  id="horizontal-list">
            <li class="class={% if url_name == 'web-index' %} active{% endif %}">
                <a href="{% url 'web:web-index' %}">
                    <i class="fa fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            {% if request.user|has_permission_name:"SYS_MANAGE_PERMISSION_ENTITIES" or request.user|has_permission_name:"CAN_MANAGE_ROLE"%}
            {% check_valid_url url_name 'authentications' as is_authen_url %}
            <li class="menu-accordion {% if is_authen_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-sign-in"></i> <span>Authorizations</span> </a>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"SYS_MANAGE_PERMISSION_ENTITIES"%}
                    <li class="menu-accordion {% if 'permissions' in request.path %}open{% endif %}">
                        <a href="javascript:;"><span>Permissions</span> </a>
                        <ul class="sub-menu">
                            <li class="{% if url_name in 'permissions_list,edit_permission,permission_detail,delete_permission' %}active{% endif %}">
                                <a href="{% url 'authentications:permissions_list' %}"> <span>Permission Entities</span> </a>
                            </li>
                            {% if request.user|has_permission_name:"SYS_CREATE_PERMISSION_ENTITIES"%}
                            <li class="{% if url_name == 'create_permission' %}active{% endif %}">
                                <a href="{% url 'authentications:create_permission' %}"> <span>Create Permission</span> </a>
                            </li>
                            {% endif %}
                        </ul>
                    </li>
                    {% endif %}

                    {% if request.user|has_permission_name:"CAN_MANAGE_ROLE"%}
                    <li class="menu-accordion {% if 'roles' in request.path %}open{% endif %}">
                        <a href="javascript:;"><span>Roles</span> </a>
                        <ul class="sub-menu">
                            <li class="{% if url_name in 'role_list,edit_role,delete_role,role_detail,role_manage_permission' %}active{% endif %}">
                                <a href="{% url 'authentications:role_list' %}"> <span>Role Entities</span> </a>
                            </li>
                            {% if request.user|has_permission_name:"CAN_CREATE_ROLE"%}
                            <li class="{% if url_name == 'create_role' %}active{% endif %}">
                                <a href="{% url 'authentications:create_role' %}"> <span>Create Role</span> </a>
                            </li>
                            {% endif %}
                        </ul>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"SYS_MANAGE_COUNTRYCODE" or request.user|has_permission_name:"SYS_VIEW_CURRENCY" or request.user|has_permission_name:"SYS_MANAGE_COMPANY_BALANCE" %}
            {% check_valid_url url_name 'balances' as is_balance_url %}
            <li class="menu-accordion {% if is_balance_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-money"></i> <span>Balances</span> </a>
                {% if request.user|has_permission_name:"SYS_MANAGE_COUNTRYCODE"%}
                <ul class="sub-menu">
                    <li class="{% if url_name == 'country-code' %}active{% endif %}">
                        <a href="{% url 'balances:country-code' %}"> <span>Country Code</span> </a>
                    </li>
                </ul>
                {% endif %}
                {% if request.user|has_permission_name:"SYS_VIEW_CURRENCY"%}
                <ul class="sub-menu">
                    <li class="{% if url_name == 'currency-list' %}active{% endif %}">
                        <a href="{% url 'balances:currency-list' %}"> <span>Currencies</span> </a>
                    </li>
                </ul>
                {% endif %}
                {% if request.user|has_permission_name:"SYS_MANAGE_COMPANY_BALANCE"%}
                <ul class="sub-menu">
                    <li class="{% if url_name == 'initial_company_balance' %}active{% endif %}">
                        <a href="{% url 'balances:initial_company_balance' %}">
                            <span>Setup Company Balance</span> </a>
                    </li>
                </ul>
                {% endif %}
                {% if request.user|has_permission_name:"SYS_MANAGE_COMPANY_BALANCE"%}
                <ul class="sub-menu">
                    <li class="{% if url_name == 'company_balance' %}active{% endif %}">
                        <a href="{% url 'balances:company_balance' %}"> <span>Company Balance</span> </a>
                    </li>
                </ul>
                {% endif %}
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_SERVICE_GROUP" or request.user|has_permission_name:"CAN_MANAGE_SERVICE"%}
            {% check_valid_url url_name 'service_group,services' as is_services_urls %}
            <li class="menu-accordion class={% if is_services_urls %} open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-tasks"></i> <span>Payment Services</span> </a>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"CAN_MANAGE_SERVICE_GROUP"%}
                    {% check_valid_url url_name 'service_group' as is_service_group_url %}
                    <li class="class={% if is_service_group_url %} active{% endif %}">
                        <a href="{% url 'service_group:service_group_list' %}"> <span>Service Groups</span> </a>
                    </li>
                    {% endif %}
                    {% if request.user|has_permission_name:"CAN_MANAGE_SERVICE" %}
                    {% check_valid_url url_name 'services' as is_services_url %}
                    <li class="class={% if is_services_url %} active{% endif %}">
                        <a href="{% url 'services:services_list' %}"> <span>Services</span> </a>
                    </li>
                    {% endif %}

                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_AGENT_TYPE" or request.user|has_permission_name:"CAN_MANAGE_AGENT_REGISTRATION" or request.user|has_permission_name:"CAN_VIEW_AGENT_LIST"%}
                {% check_valid_url url_name 'agent_type,agents' as is_agent_urls %}
                <li class="menu-accordion {% if is_agent_urls %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-id-card-o" aria-hidden="true"></i> <span>Agents</span> </a>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"CAN_MANAGE_AGENT_TYPE"%}
                    {% check_valid_url url_name 'agent_type' as is_agent_type_url %}
                    <li class="class={% if is_agent_type_url %} active{% endif %}">
                        <a href="{% url 'agent_type:agent-type-list' %}"> <span>Agent Types</span> </a>
                    </li>
                    {% endif %}
                </ul>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"CAN_MANAGE_AGENT_REGISTRATION"%}
                        <li class="class={% if url_name == 'agent_registration' %} active{% endif %}">
                        <a href="{% url 'agents:agent_registration' %}"> <span>Agent Registration</span> </a>
                    </li>
                    {% endif %}
                </ul>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"CAN_VIEW_AGENT_LIST"%}
                        {% check_valid_url url_name 'agents' as is_agent_url %}
                        <li class="class={% if is_agent_url and 'registration' not in request.path %} active{% endif %}">
                        <a href="{% url 'agents:agent-list' %}"> <span>Agent Profile</span> </a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_CLIENTS"%}
            {% check_valid_url url_name 'clients' as is_client_url %}
            <li class="class={% if is_client_url %} active{% endif %}">
                <a href="{% url 'clients:client-list' %}">
                    <i class="fa fa-male"></i>
                    <span>Clients</span>
                </a>
            </li>
            {% endif %}
            <!--<li class="class={% if url_name == 'api_list' %} active{% endif %}">-->
            <!--<a href="{% url 'api_management:api_list' %}">-->
            <!--<i class="fa fa-sort-numeric-asc"></i>-->
            <!--<span>Api management</span>-->
            <!--</a>-->
            <!--</li>-->
            {% if request.user|has_permission_name:"SYS_MANAGE_SCOPES"%}
            {% check_valid_url url_name 'centralize_configuration' as is_central_url %}
            <li class="class={% if is_central_url %} active{% endif %}">
                <a href="{% url 'centralize_configuration:scope_list' %}">
                    <i class="fa fa-cog"></i>
                    <span>Centralize Configuration</span>
                </a>
            </li>
            {% endif %}
            <!-- <li class="menu-accordion {% if 'api-management' in request.path %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-credit-card"></i> <span>Api management</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'api_list' %}active{% endif %}">
                        <a href="{% url 'api_management:api_list' %}">
                            <span>Apis</span>
                        </a>
                    </li>
                </ul>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'service_list' %}active{% endif %}">
                        <a href="{% url 'api_management:service_list' %}"> <span>Services</span> </a>
                    </li>
                </ul>
            </li> -->
            {% if request.user|has_permission_name:"CAN_MANAGE_MEMBER_CUSTOMER_PROFILE" or request.user|has_permission_name:"CAN_MANAGE_BLOCKED_DEVICES"%}
                {% check_valid_url url_name 'customers' as is_customer_url%}
                <li class="{% if is_customer_url %} open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-users"></i> <span>Member Customers</span> </a>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"CAN_MANAGE_MEMBER_CUSTOMER_PROFILE"%}
                    <li id="customers_menu" class="{% if url_name == 'customer-list' %}active{% endif %}">
                        <a href="{% url 'customers:customer-list' %}"><span>Member Customers Profile</span></a>
                    </li>
                    {% endif %}
                    {% if request.user|has_permission_name:"CAN_MANAGE_BLOCKED_DEVICES"%}
                    <li id="blocked_devices" class="{% if url_name == 'blocked-devices' %}active{% endif %}">
                        <a href="{% url 'customers:blocked-devices' %}"><span>Blocked Devices</span></a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"SYS_MANAGE_SYSTEM_USER"%}
            {% check_valid_url url_name 'system_user' as is_sys_user_url%}
            <li class="{% if is_sys_user_url %} open{% endif %}">
                <a href="javascript:;"><i class="fa fa-user-circle-o"></i><span>System Users</span> </a>
                <ul class="sub-menu">
                    <li id="system_user_menu" class="{% if is_sys_user_url %}active{% endif %}">
                        <a href="{% url 'system_user:system-user-list' %}"><span>System Users</span></a>
                    </li>
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_CARD"%}
                {% check_valid_url url_name 'cards,card_type' as is_card_urls %}
                <li class="menu-accordion {% if is_card_urls %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-credit-card"></i> <span>Card Management</span> </a>
                {% if request.user|has_permission_name:"CAN_SEARCH_CARD_PROFILE"%}
                    <ul class="sub-menu">
                    <li class="{% if url_name == 'profile' %}active{% endif %}">
                        <a href="{% url 'cards:profile' %}"> <span>Profile</span> </a>
                    </li>
                </ul>
                {% endif %}
                {% if request.user|has_permission_name:"CAN_SEARCH_CARD_HISTORY"%}
                    <ul class="sub-menu">
                    <li class="{% if url_name == 'history' %}active{% endif %}">
                        <a href="{% url 'cards:history' %}"> <span>History</span> </a>
                    </li>
                </ul>
                {% endif %}
                <ul class="sub-menu">
                    {% check_valid_url url_name 'card_type' as is_card_type_url %}
                    <li class="{% if is_card_type_url %}active{% endif %}">
                        <a href="{% url 'card_type:card-type-list' %}"> <span>Card Type List</span> </a>
                    </li>
                </ul>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'card_freeze_list' %}active{% endif %}">
                        <a href="{% url 'cards:card_freeze_list' %}"> <span>Freeze cards list</span> </a>
                    </li>
                </ul>

            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_PAYMENT"%}
            {% check_valid_url url_name 'payments' as is_payment_url%}
            <li class="menu-accordion {% if is_payment_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-list"></i> <span>Payment</span> </a>
                <ul class="sub-menu">
                    <li class="{% if is_payment_url %}active{% endif %}">
                        <a href="{% url 'payments:payment_order' %}"> <span>Order</span> </a>
                    </li>
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_CASH_SOF"%}
                {% check_valid_url url_name 'cash_sofs' as is_cash_sofs_url%}
                <li class="menu-accordion {% if is_cash_sofs_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-credit-card"></i> <span>Cash Source Of Fund</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'cash_sof' %}active{% endif %}">
                        <a href="{% url 'cash_sofs:cash_sof' %}"> <span>Source of Fund</span> </a>
                    </li>
                </ul>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'cash_transaction' %}active{% endif %}">
                        <a href="{% url 'cash_sofs:cash_transaction' %}"> <span>Transaction</span> </a>
                    </li>
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_BANK_SOF"%}
                {% check_valid_url url_name 'bank_sofs' as is_bank_sof_url %}
                <li id="bank_sof_menu" class="menu-accordion {% if is_bank_sof_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-credit-card"></i> <span>Bank Source Of Fund</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'bank_sof' %}active{% endif %}">
                        <a id="bank_sof_list" href="{% url 'bank_sofs:bank_sof' %}"> <span>Source of Fund</span> </a>
                    </li>
                     <li class="{% if url_name == 'bank_sofs_transaction' %}active{% endif %}">
                        <a id="bank_transaction" href="{% url 'bank_sofs:bank_sofs_transaction' %}"> <span>Transaction</span> </a>
                    </li>
                </ul>
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"CAN_MANAGE_CARD_SOF"%}
            {% check_valid_url url_name 'card_sofs' as is_card_sof_url %}
            <li id="card_sof_menu" class="menu-accordion {% if is_card_sof_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-credit-card"></i> <span>Card Source Of Fund</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'card_sof' %}active{% endif %}">
                        <a id="card_sof_list" href="{% url 'card_sofs:card_sof' %}"> <span>Source of Fund</span> </a>
                    </li>
                    <li class="{% if url_name == 'card_sofs_transaction' %}active{% endif %}">
                        <a id="card_sofs_transaction" href="{% url 'card_sofs:card_sofs_transaction' %}"> <span>Transaction</span> </a>
                    </li>
                </ul>
            </li>
            {% endif %}
            
            {% if request.user|has_permission_name:"SYS_MANAGE_BANK" or request.user|has_permission_name:"SYS_MANAGE_CARD_DESIGN" or request.user|has_permission_name:"SYS_MANAGE_PROVIDER"%}
                {% check_valid_url url_name 'bank,card_design,card_provider' as is_sof_url %}
                <li class="menu-accordion {% if is_sof_url %}open{% endif %}">
                    <a href="javascript:;"> <i class="fa fa-clone"></i> <span>Source Of Fund</span> </a>
                    {% if request.user|has_permission_name:"SYS_MANAGE_BANK"%}
                    <ul class="sub-menu">
                        {% check_valid_url url_name 'bank' as is_bank_url %}
                        <li class="{% if is_bank_url %}active{% endif %}">
                            <a href="{% url 'bank:bank_sofs_list' %}"> <span>Manage Bank</span> </a>
                        </li>
                    </ul>
                    {%endif%}
                    {% if request.user|has_permission_name:"SYS_MANAGE_CARD_DESIGN"%}
                        <ul class="sub-menu">
                            {% check_valid_url url_name 'card_design' as is_card_design_url %}
                            <li class="{% if is_card_design_url %}active{% endif %}">
                                <a href="{% url 'card_design:card_designs' %}"> <span>Manage Card Design</span> </a>
                            </li>
                        </ul>
                    {% endif %}
                    {% if request.user|has_permission_name:"SYS_MANAGE_PROVIDER"%}
                        <ul class="sub-menu">
                            {% check_valid_url url_name 'card_provider' as is_card_provider_url %}
                            <li class="{% if is_card_provider_url %}active{% endif %}">
                                <a href="{% url 'card_provider:card_provider' %}"> <span>Manage Card Provider</span> </a>
                            </li>
                        </ul>
                    {%endif%}
                </li>
            {%endif%}
            {% if request.user|has_permission_name:"CAN_MANAGE_RECONCILE"%}
            {% check_valid_url url_name 'reconcile' as is_reconcile_url %}
            <li class="menu-accordion {% if is_reconcile_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-exchange"></i> <span>Reconcile</span> </a>
                {% if request.user|has_permission_name:"CAN_MANAGE_PARTNER_RECONCILE"%}
                <ul class="sub-menu">
                    <li class="menu-accordion {% if 'partner' in request.path %}open{% endif %}">
                        <a href="javascript:;" id="partner_menu_reconcile"><span>Partner</span> </a>
                        <ul class="sub-menu">
                            {% if request.user|has_permission_name:"CAN_GET_FILE_LIST_PARTNER_RECONCILE"%}
                            <li class="{% if 'partner/file-list' in request.path %}active{% endif %}">
                                <a href="{% url 'reconcile:reconcile_partner_file_list' %}" id="partner_menu_file_list"> <span>File List</span> </a>
                            </li>
                            {% endif %}
                            {% if request.user|has_permission_name:"CAN_GET_RECONCILE_REPORT_PARTNER_RECONCILE"%}
                            <li class="{% if 'partner/report' in request.path %}active{% endif %}">
                                <a href="{% url 'reconcile:reconcile_partner_report' %}" id="partner_menu_reconcile_report"> <span>Reconcile Report</span> </a>
                            </li>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
                {% endif %}
                {% if request.user|has_permission_name:"CAN_MANAGE_SOF_RECONCILE"%}
                <ul class="sub-menu">
                    <li class="menu-accordion {% if 'reconcile/sof/' in request.path %}open{% endif %}">
                        <a href="javascript:;"> <span>Source of fund</span> </a>
                        <ul class="sub-menu">
                            {% if request.user|has_permission_name:"CAN_GET_FILE_LIST_SOF_RECONCILE"%}
                            <li class="{% if 'sof/file-list' in request.path %}active{% endif %}">
                                <a href="{% url 'reconcile:reconcile_sof_file_list' %}" id="sof_menu_file_list"> <span>File List</span> </a>
                            </li>
                            {% endif %}
                            {% if request.user|has_permission_name:"CAN_GET_RECONCILE_REPORT_SOF_RECONCILE"%}
                            <li class="{% if 'sof/report' in request.path %}active{% endif %}">
                                <a href="{% url 'reconcile:reconcile_sof_report' %}" id="sof_menu_reconcile_report"> <span>Reconcile Report</span> </a>
                            </li>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
                {% endif %}
            </li>
            {% endif %}
            {% if request.user|has_permission_name:"SYS_BAL_ADJUST_REQUEST" or request.user|has_permission_name:"SYS_BAL_ADJUST_HISTORY"%}
            {% check_valid_url url_name 'balance_adjustment' as is_adj_url %}
            <li class="menu-accordion {% if is_adj_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-pencil-square-o"></i> <span>Balance Adjustment</span> </a>
                <ul class="sub-menu">
                    {% if request.user|has_permission_name:"SYS_BAL_ADJUST_HISTORY"%}
                    <li class="{% if url_name == 'balance_adjustment_list' or url_name == 'balance_adjustment_detail' %}active{% endif %}">
                        <a href="{% url 'balance_adjustment:balance_adjustment_list' %}"> <span>View and Approve Adjustment Requests</span> </a>
                    </li>
                    {% endif %}
                    {% if request.user|has_permission_name:"SYS_BAL_ADJUST_REQUEST"%}
                    <li class="{% if url_name == 'balance_adjustment_create' %}active{% endif %}">
                        <a href="{% url 'balance_adjustment:balance_adjustment_create' %}"> <span>Balance Adjustment Execute</span> </a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}

            {% if request.user|has_permission_name:"CAN_VIEW_CAMPAIGNS"%}
            {% check_valid_url url_name 'campaign' as is_campaign_url %}
            <li class="menu-accordion {% if is_campaign_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-cubes"></i> <span>Campaigns</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'campaign'%}active{% endif %}">
                        <a href="{% url 'campaign:campaign' %}"> 
                            <span>Campaign List</span> 
                        </a>
                    </li>
                    {% if request.user|has_permission_name:"CAN_EDIT_CAMPAIGN_CONFIGURATION"%}
                    <li class="{% if url_name == 'campaign_configuration'%}active{% endif %}">
                        <a href="{% url 'campaign:campaign_configuration' %}" id="campaign_configuration">
                            <span>Campaign Configuration</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}

            {% if user.is_authenticated %}
            {% check_valid_url url_name 'fraud_prevention' as is_fp_url %}
            <li class="menu-accordion {% if is_fp_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-shield"></i> <span>Fraud Prevention</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'fraud_prevention'%}active{% endif %}">
                        <a href="{% url 'fraud_prevention:fraud_prevention' %}">
                            <span>Create Fraud Ticket</span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}
            {% if user.is_authenticated %}
            {% check_valid_url url_name 'rule_configuration' as is_fp_url %}
            <li class="menu-accordion {% if is_fp_url %}open{% endif %}">
                <a href="javascript:;"> <i class="fa fa-history"></i> <span>Rule Configuration</span> </a>
                <ul class="sub-menu">
                    <li class="{% if url_name == 'rule_configuration'%}active{% endif %}">
                        <a href="{% url 'rule_configuration:rule_engine' %}">
                            <span>Rule List</span>
                        </a>
                    </li>
                </ul>
            </li>
            {% endif %}
            <li>
                {% if user.is_authenticated %}
                <a href="{% url 'authentications:logout' %}">
                    <i class="fa fa-power-off"></i>
                    <span class="">Logout</span>
                </a>
                {% endif %}
            </li>
        </ul>
    </nav>
    {% endwith %}
</div>
{% endblock %}