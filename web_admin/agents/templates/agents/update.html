{% extends "base.html" %}
{% load static %}
{% load permissions_filter %}
{% block body_stylesheet %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'vendor/sweetalert/lib/sweet-alert.css' %}">
{% endblock %}

{% block content %}
    <style>
        .btn-arrow-down  {
            background-color: white;
            position: absolute;
            width: 33px;
            height: 30px;
            border-radius: 15px;
            right: 0;
        }
        .collapsible {
            margin-bottom: 10px;
        }
        .form-horizontal .control-title {
            padding-top: 7px;
            margin-bottom: 0;
            padding-left: 15px;
            text-align: left;
        }
    </style>
    {% csrf_token %}
    <div class="panel mb25">
        <div class="panel-heading border">
            <h3>Edit Agent</h3>
            {% for msg in msgs.values %}
                {% if msg is not None %}
                    <div class="col-xs-12">
                        <div class="alert
                    {% if "successfully" in msg %}
                        alert-success
                    {% else %}
                        alert-danger
                    {% endif %}
                    alert-dismissable" id="msg-update-client">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">Ã—</a>
                            <strong>{{ msg }}</strong>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                {% endif %}
            {% endfor %}
        </div>
        <div class="panel-body">
            <div class="row no-margin">
                <div class="col-lg-12">
                    <form id="submit-form" class="form-horizontal" role="form" method="post"
                          action="#">
                        {% csrf_token %}

                        <!-- Begin section 1: Account Basics -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Account Basics</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-account-basic" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Agent ID *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="agent_id"
                                           id="txt_agent_id"
                                           value="{{ agent_profile.id|default_if_none:'' }}" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Testing Account</label>
                                <div class="col-sm-7">
                                    <input type="checkbox" style="margin: 10px;" id="chk_testing_account"
                                           name="is_testing_account"
                                            {% if agent_profile.is_testing_account == True %} checked{% endif %}
                                            >
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">System Account</label>
                                <div class="col-sm-7">
                                    <input type="checkbox" style="margin: 10px;" id="chk_system_account"
                                           name="is_system_account"
                                               {% if agent_profile.is_system_account == True %} checked{% endif %}
                                           >
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Status *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="status" id="txt_status"
                                           value="{{ agent_profile.is_suspended|yesno:'Suspended,Active' }}" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Acquisition Source</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="acquisition_source"
                                           id="txt_acquisition_source"
                                           value="{{ agent_profile.acquisition_source|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Referrer User Type</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_referrer_user_type" name="referrer_user_type">
                                        <option value="" {% if agent_profile.referrer_user_type_id == "" %} selected{% endif %}>-</option>
                                        <option value="3" {% if agent_profile.referrer_user_type_id == 3 %} selected{% endif %}>System User</option>
                                        <option value="2" {% if agent_profile.referrer_user_type_id == 2 %} selected{% endif %}>Agent</option>
                                        <option value="1" {% if agent_profile.referrer_user_type_id == 1 %} selected{% endif %}>Customer</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Referrer User ID</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control input-rounded" name="referrer_user_id"
                                           id="txt_referrer_user_id"
                                           value="{{ agent_profile.referrer_user_id|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Suspend Reason</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="suspend_reason"
                                           id="txt_suspend_reason"
                                           value="{{ agent_profile.active_suspend_reason|default_if_none:'' }}" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Profile Created Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="created_date"
                                           onchange="VerifyDate(this)"
                                           id="dtp_created_date"
                                           value="{{ agent_profile.created_date|date:'Y-m-d'|default_if_none:'' }}" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Profile Updated Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="last_updated_date"
                                           onchange="VerifyDate(this)"
                                           id="dtp_last_updated_date"
                                           value="{{ agent_profile.last_updated_date|date:'Y-m-d'|default_if_none:'' }}" disabled/>
                                </div>
                            </div>
                        </div>

                        <hr/>

                        <!-- Begin section 2 Basic Setup -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Basic Setup</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-basic-setup" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Agent Type *</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_agent_type" name="agent_type_id">
                                        {% for item in agent_types %}
                                            {% if item.id != agent_profile.agent_type_id %}
                                                <option value="{{ item.id }}">{{ item.name }}</option>
                                            {% else %}
                                                <option value="{{ item.id }}" selected>{{ item.name }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">User Name Type *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="identity_type"
                                           id="txt_identity_type"
                                           value="{{ status_get_agent_identity.identity_type.name|default_if_none:'' }}"
                                           disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">User Name *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="user_name"
                                           id="txt_user_name" value="{{ status_get_agent_identity.username }}"
                                           disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Password *</label>
                                <div class="col-sm-7">
                                    <input type="password" class="form-control input-rounded" name="password"
                                           id="txt_password" value="******" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Re-password *</label>
                                <div class="col-sm-7">
                                    <input type="password" class="form-control input-rounded" name="re_password"
                                           id="txt_re_password" value="******" disabled/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Currency *</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_currency" name="currency" disabled>
                                        <option value="{{ currencies }}" selected>{{ currencies }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Unique Reference *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="unique_reference"
                                           id="txt_unique_reference"
                                           value="{{ agent_profile.unique_reference|default_if_none:'' }}" required/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">MM Card Type</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_mm_card_types" name="mm_card_types" onchange="loadMMCardLevel()" data-url="{% url 'agents:get_mm_card_level' %}">
                                        {% if not agent_profile.mm_card_type_id %}
                                            <option value="" selected>-</option>
                                        {% else %}
                                            <option value="">-</option>
                                        {% endif %}
                                        {% for item in mm_card_types %}
                                            {% if agent_profile.mm_card_type_id == item.id %}
                                                <option value="{{ item.id }}" selected>{{ item.name }}</option>
                                            {% else %}
                                                <option value="{{ item.id }}">{{ item.name }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">MM Card Level</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_mm_card_levels" name="mm_card_levels">
                                        {% if not agent_profile.mm_card_level %}
                                            <option value="" selected>-</option>
                                        {% else %}
                                            <option value="">-</option>
                                        {% endif %}
                                        {% for item in mm_card_levels %}
                                            {% if agent_profile.mm_card_level_id == item.id %}
                                                <option value="{{ item.id }}" selected>{{ item.level }}</option>
                                            {% else %}
                                                <option value="{{ item.id }}">{{ item.level }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">MM Factory Card Number</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="mm_factory_card_number"
                                           id="txt_mm_factory_card_number"
                                           value="{{ agent_profile.mm_factory_card_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Model Type</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_model_type" name="model_type">
                                        <option value="" {%if not agent_profile.model_type %}selected{%endif%}>-</option>
                                        <option value="1" {%if agent_profile.model_type == '1' %}selected{%endif%}>1</option>
                                        <option value="2" {%if agent_profile.model_type == '2' %}selected{%endif%}>2</option>
                                        <option value="3" {%if agent_profile.model_type == '3' %}selected{%endif%}>3</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Always require OTP</label>
                                <div class="col-sm-7">
                                    <input type="checkbox" style="margin: 10px;" id="chk_require_otp" name="is_require_otp"
                                        {% if agent_profile.is_require_otp %}checked{% endif %}>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Classification</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_agent_classification"
                                            name="agent_classification_id">
                                        {% if not agent_profile.agent_classification_id %}
                                            <option value="" selected>-</option>
                                        {% else %}
                                            <option value="">-</option>
                                        {% endif %}
                                        {% for agent_classification in agent_classification_list %}
                                            {% if agent_profile.agent_classification_id == agent_classification.id %}
                                                <option value="{{ agent_classification.id }}" selected>{{ agent_classification.name }}</option>
                                            {% else %}
                                                <option value="{{ agent_classification.id }}">{{ agent_classification.name }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <hr/>

                        <!-- Begin section 3 Personal Details -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Personal Details</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-personal-detail" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Personal TIN Number</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="tin_number"
                                           id="txt_tin_number"
                                           value="{{ agent_profile.tin_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Title</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="title"
                                           id="txt_title" value="{{ agent_profile.title|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">First Name *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="first_name"
                                           id="txt_first_name" value="{{ agent_profile.first_name|default_if_none:'' }}"
                                           required/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Middle Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="middle_name"
                                           id="txt_middle_name"
                                           value="{{ agent_profile.middle_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Last Name *</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="last_name"
                                           id="txt_last_name" value="{{ agent_profile.last_name|default_if_none:'' }}"
                                           required/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Suffix</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="suffix"
                                           id="txt_suffix" value="{{ agent_profile.suffix|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Date of Birth</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="date_of_birth"
                                           onchange="VerifyDate(this)"
                                           id="dtp_birth_date"
                                           value="{{ agent_profile.date_of_birth|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Place of Birth</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="place_of_birth"
                                           id="txt_place_of_birth"
                                           value="{{ agent_profile.place_of_birth|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Gender</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="gender"
                                           id="txt_gender" value="{{ agent_profile.gender|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Ethnicity</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_ethnicity" name="ethnicity">
                                        <option value="" {% if not agent_profile.ethnicity%}selected{% endif %}>-</option>
                                        <option value="White" {% if agent_profile.ethnicity == "White" %} selected{% endif %}>White</option>
                                        <option value="Hispanic/Latino" {% if agent_profile.ethnicity == "Hispanic/Latino" %} selected{% endif %}>Hispanic/Latino</option>
                                        <option value="Black or African American" {% if agent_profile.ethnicity == "Black or African American" %} selected{% endif %}>Black or African American</option>
                                        <option value="Asian" {% if agent_profile.ethnicity == "Asian" %} selected{% endif %}>Asian</option>
                                        <option value="Ethnicity Unknown" {% if agent_profile.ethnicity == "Ethnicity Unknown" %} selected{% endif %}>Ethnicity Unknown</option>
                                        <option value="Other" {% if agent_profile.ethnicity == "Other" %} selected{% endif %}>Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Nationality</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="nationality"
                                           id="txt_nationality"
                                           value="{{ agent_profile.nationality|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Occupation</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="occupation"
                                           id="txt_occupation"
                                           value="{{ agent_profile.occupation|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Occupation Title</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="occupation_title"
                                           id="txt_occupation_title"
                                           value="{{ agent_profile.occupation_title|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Township Code</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="township_code"
                                           id="txt_township_code"
                                           value="{{ agent_profile.township_code|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Township Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="township_name"
                                           id="txt_township_name"
                                           value="{{ agent_profile.township_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">National ID Number</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="national_id_number"
                                           id="txt_national_id_number"
                                           value="{{ agent_profile.national_id_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Mother's Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="mother_name"
                                           id="txt_mother_name"
                                           value="{{ agent_profile.mother_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>

                        <hr/>

                        <!-- Begin section 4 Contact Details -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Contact Details</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-contact-detail" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Email</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="email"
                                           id="txt_email" value="{{ agent_profile.email|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Primary Mobile Number</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control input-rounded" name="primary_mobile_number"
                                           id="txt_primary_mobile_number"
                                           value="{{ agent_profile.primary_mobile_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Secondary Mobile Number</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control input-rounded"
                                           name="secondary_mobile_number"
                                           id="txt_secondary_mobile_number"
                                           value="{{ agent_profile.secondary_mobile_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Tertiary Mobile Number</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control input-rounded"
                                           name="tertiary_mobile_number"
                                           id="txt_tertiary_mobile_number"
                                           value="{{ agent_profile.tertiary_mobile_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>
                        <hr/>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title current-address-label"><h4>Current Address</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-current-address" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Citizen Association</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_citizen_association"
                                           id="txt_current_address_citizen_association"
                                           value="{{ agent_profile.address.current_address.citizen_association|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Neighbourhood Association</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="current_neighbourhood_association"
                                           id="txt_current_address_neighbourhood_association"
                                           value="{{ agent_profile.address.current_address.neighbourhood_association|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Address</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_address"
                                           id="txt_current_address_address"
                                           value="{{ agent_profile.address.current_address.address|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Commune</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_commune"
                                           id="txt_current_address_commune"
                                           value="{{ agent_profile.address.current_address.commune|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">District</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_district"
                                           id="txt_current_address_district"
                                           value="{{ agent_profile.address.current_address.district|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">City</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_city"
                                           id="txt_city" value="{{ agent_profile.address.current_address.city|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Province</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_province"
                                           id="txt_current_address_province"
                                           value="{{ agent_profile.address.current_address.province|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Postal Code</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_postal_code"
                                           id="txt_current_address_postal_code"
                                           value="{{ agent_profile.address.current_address.postal_code|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Country</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_country"
                                           id="txt_current_address_country"
                                           value="{{ agent_profile.address.current_address.country|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Landmark</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_landmark"
                                           id="txt_current_address_landmark"
                                           value="{{ agent_profile.address.current_address.landmark|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Longitude</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_longitude"
                                           id="txt_current_address_longitude"
                                           value="{{ agent_profile.address.current_address.longitude|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Latitude</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="current_latitude"
                                           id="txt_current_address_latitude"
                                           value="{{ agent_profile.address.current_address.latitude|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>
                        <div class="checkbox" style="margin-left: 30px;">
                            <label>
                                <input type="checkbox" id="chk_permanent_address" name="is_permanent_same_current">Permanent
                                Address and Current Address are the same</label>
                        </div>
                        <hr/>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-6 control-title current-address-label"><h4>Permanent Address</h4></label>
                                <div class="col-sm-4"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-permanent-address" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Citizen Association</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="permanent_citizen_association"
                                           id="txt_permanent_address_citizen_association"
                                           value="{{ agent_profile.address.permanent_address.citizen_association|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Neighbourhood Association</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="permanent_neighbourhood_association"
                                           id="txt_ppermanent_address_neighbourhood_association"
                                           value="{{ agent_profile.address.permanent_address.neighbourhood_association|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Address</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_address"
                                           id="txt_permanent_address_address"
                                           value="{{ agent_profile.address.permanent_address.address|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Commune</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_commune"
                                           id="txt_permanent_address_commune"
                                           value="{{ agent_profile.address.permanent_address.commune|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">District</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_district"
                                           id="txt_permanent_address_district"
                                           value="{{ agent_profile.address.permanent_address.district|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">City</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_city"
                                           id="txt_permanent_address_city"
                                           value="{{ agent_profile.address.permanent_address.city|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Province</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_province"
                                           id="txt_permanent_address_province"
                                           value="{{ agent_profile.address.permanent_address.province|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Postal Code</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="permanent_postal_code"
                                           id="txt_permanent_address_postal_code"
                                           value="{{ agent_profile.address.permanent_address.postal_code|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Country</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_country"
                                           id="txt_permanent_address_country"
                                           value="{{ agent_profile.address.permanent_address.country|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Landmark</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_landmark"
                                           id="txt_permanent_address_landmark"
                                           value="{{ agent_profile.address.permanent_address.landmark|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Longitude</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_longitude"
                                           id="txt_permanent_address_longitude"
                                           value="{{ agent_profile.address.permanent_address.longitude|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Latitude</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="permanent_latitude"
                                           id="txt_permanent_address_latitude"
                                           value="{{ agent_profile.address.permanent_address.latitude|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>
                        <hr/>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Bank Details</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-bank-detail" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Bank Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="bank_name"
                                           id="txt_bank_name" value="{{ agent_profile.bank.name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Bank Account Status</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_bank_account_status" name="bank_account_status">
                                        <option value=""  {% if agent_profile.bank.account_status is None %} selected{% endif %}>-</option>
                                        <option value="1" {% if agent_profile.bank.account_status == True %} selected{% endif %}>Active</option>
                                        <option value="0" {% if agent_profile.bank.account_status == False %} selected{% endif %}>Inactive</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Bank Account Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="bank_account_name"
                                           id="txt_bank_account_name"
                                           value="{{ agent_profile.bank.account_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Bank Account Number</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="bank_account_number"
                                           id="txt_bank_account_number"
                                           value="{{ agent_profile.bank.account_number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Bank Branch Area</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="bank_branch_area"
                                           id="txt_bank_branch_area"
                                           value="{{ agent_profile.bank.branch_area|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Bank Branch City</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="bank_branch_city"
                                           id="txt_bank_branch_city"
                                           value="{{ agent_profile.bank.branch_city|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Register Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="bank_register_date"
                                           onchange="VerifyDate(this)"
                                           id="dtp_register_date"
                                           value="{{ agent_profile.bank_register_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Register Source</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="bank_register_source"
                                           id="txt_register_source"
                                           value="{{ agent_profile.bank.register_source|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Verify Status</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_verify_status" name="bank_verify_status">
                                        <option value="1" {% if agent_profile.bank.is_verified == True %} selected{% endif %}>Yes</option>
                                        <option value="0" {% if agent_profile.bank.is_verified == False %} selected{% endif %}>No</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">End Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="bank_end_date"
                                           onchange="VerifyDate(this)"
                                           id="dtp_end_date"
                                           value="{{ agent_profile.bank_end_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>
                        <hr/>

                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Contract Details</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-contract-detail" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Release</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="contract_release"
                                           id="txt_contract_release"
                                           value="{{ agent_profile.contract.release|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Contract Type</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="contract_type"
                                           id="txt_contract_type"
                                           value="{{ agent_profile.contract.type|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Contract Number</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="contract_number"
                                           id="txt_contract_number"
                                           value="{{ agent_profile.contract.number|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Extension Type</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="contract_extension_type"
                                           id="txt_contract_extension_type"
                                           value="{{ agent_profile.contract.extension_type|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Contract Sign Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="contract_sign_date"
                                           id="txt_contract_sign_date"
                                           value="{{ agent_profile.contract_sign_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Contract Issue Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="contract_issue_date"
                                           id="txt_contract_issue_date"
                                           value="{{ agent_profile.contract_issue_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Contract Expiry Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="contract_expiry_date"
                                           id="txt_contract_expired_date"
                                           value="{{ agent_profile.contract_expired_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Notification Alert</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="notification_alert"
                                           id="txt_contract_notification_alert"
                                           value="{{ agent_profile.contract.notification_alert|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Reconciliation Period (Days)</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control input-rounded"
                                           name="reconciliation_period_days"
                                           id="txt_contract_reconciliation_period_days"
                                           value="{{ agent_profile.contract.day_of_period_reconciliation|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Contract File</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="contract_file"
                                           id="txt_contract_file"
                                           value="{{ agent_profile.contract.file_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Assessment Information</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="assessment_information"
                                           id="txt_contract_assessment_information"
                                           value="{{ agent_profile.contract.assessment_information_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>
                        <hr/>

                        <!-- Begin section 5 Profile Accreditation Details -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-6 control-title"><h4>Profile Accreditation Details</h4></label>
                                <div class="col-sm-4"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-accreditation-detail" class="collapsible">
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label class="col-sm-4 control-label"><strong>Primary Identity</strong></label>
                                    <div class="col-sm-8"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Identity Type</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="primary_identify_type"
                                           id="txt_primary_identity_type"
                                           value="{{ agent_profile.accreditation.primary_identity.type|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Status</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_primary_identity_status"
                                            name="primary_identity_status">
                                        <option value=""  {% if agent_profile.accreditation.primary_identity.status is None %} selected{% endif %}>-</option>
                                        <option value="1" {% if agent_profile.accreditation.primary_identity.status == True %} selected{% endif %}>Active</option>
                                        <option value="0" {% if agent_profile.accreditation.primary_identity.status == False %} selected{% endif %}>Inactive</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Identity ID</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="primary_identify_id"
                                           id="txt_primary_identity_id"
                                           value="{{ agent_profile.accreditation.primary_identity.identity_id|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Place of Issue</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="primary_place_of_issue"
                                           id="txt_primary_identity_place_of_issue"
                                           value="{{ agent_profile.accreditation.primary_identity.place_of_issue|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Issue Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="primary_issue_date"
                                           id="dtp_primary_identity_issue_date"
                                           value="{{ agent_profile.primary_issue_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Expire Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="primary_expire_date"
                                           id="dtp_primary_identity_expire_date"
                                           value="{{ agent_profile.primary_expire_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Front Identity Attachment</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="primary_front_identity_attachment"
                                           id="txt_primary_identity_front_identity_attachment"
                                           value="{{ agent_profile.accreditation.primary_identity.front_identity_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Back Identity Attachment</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="primary_back_identity_attachment"
                                           id="txt_primary_identity_back_identity_attachment"
                                           value="{{ agent_profile.accreditation.primary_identity.back_identity_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label class="col-sm-4 control-label"><strong>Secondary Identity</strong></label>
                                    <div class="col-sm-8"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Identity Type</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="secondary_identify_type"
                                           id="txt_secondary_identity_type"
                                           value="{{ agent_profile.accreditation.secondary_identity.type|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Status</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_secondary_identity_status"
                                            name="secondary_identity_status">
                                        <option value=""  {% if agent_profile.accreditation.secondary_identity.status is None %} selected{% endif %}>-</option>
                                        <option value="1" {% if agent_profile.accreditation.secondary_identity.status == True %} selected{% endif %}>Active</option>
                                        <option value="0" {% if agent_profile.accreditation.secondary_identity.status == False %} selected{% endif %}>Inactive</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Identity ID</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="secondary_identify_id"
                                           id="txt_secondary_identity_id"
                                           value="{{ agent_profile.accreditation.secondary_identity.identity_id|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Place of Issue</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="secondary_place_of_issue"
                                           id="txt_secondary_identity_place_of_issue"
                                           value="{{ agent_profile.accreditation.secondary_identity.place_of_issue|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Issue Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="secondary_issue_date"
                                           id="dtp_secondary_identity_issue_date"
                                           value="{{ agent_profile.secondary_issue_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Expire Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded" name="secondary_expire_date"
                                           id="dtp_secondary_identity_expire_date"
                                           value="{{ agent_profile.secondary_expire_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Front Identity Attachment</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="secondary_front_identity_attachment"
                                           id="txt_secondary_identity_front_identity_attachment"
                                           value="{{ agent_profile.accreditation.secondary_identity.front_identity_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Back Identity Attachment</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="secondary_back_identity_attachment"
                                           id="txtsecondary_identity_back_identity_attachment"
                                           value="{{ agent_profile.accreditation.secondary_identity.back_identity_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <br/>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Profile Accreditation Status</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_accreditation_status"
                                            name="accreditation_status">
                                        {% if not agent_profile.accreditation.status_id %}
                                            <option value="" selected>-</option>
                                        {% else %}
                                            <option value="">-</option>
                                        {% endif %}
                                        {% for accreditation_status in accreditation_status_list %}
                                            {% if agent_profile.accreditation.status_id == accreditation_status.id %}
                                                <option value="{{ accreditation_status.id }}" selected>{{ accreditation_status.status }}</option>
                                            {% else %}
                                                <option value="{{ accreditation_status.id }}">{{ accreditation_status.status }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Verify By</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="accreditation_verify_by"
                                           id="txt_accreditation_verify_by"
                                           value="{{ agent_profile.accreditation.verify_by|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Verify Date</label>
                                <div class="col-sm-7">
                                    <input type="date" class="form-control input-rounded"
                                           name="accreditation_verify_date"
                                           id="dtp_accreditation_verify_date"
                                           value="{{ agent_profile.accreditation_verify_date|date:'Y-m-d'|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Profile Accreditation Remark</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="accreditation_remark"
                                           id="txt_accreditation_remark"
                                           value="{{ agent_profile.accreditation.remark|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Risk Level</label>
                                <div class="col-sm-7">
                                    <select class="form-control" id="ddl_risk_level"
                                            name="accreditation_risk_level">
                                        <option value="" {% if agent_profile.accreditation.risk_level is None %} selected{% endif %}>-</option>
                                        <option value="Low" {% if agent_profile.accreditation.risk_level == "Low" %} selected{% endif %}>Low</option>
                                        <option value="Medium" {% if agent_profile.accreditation.risk_level == "Medium" %} selected{% endif %}>Medium</option>
                                        <option value="High" {% if agent_profile.accreditation.risk_level == "High" %} selected{% endif %}>High</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <hr/>

                        <!-- Begin section 6 Profile Additionals -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Additional</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-additional" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Acquiring Sales Executive Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="acquiring_sales_executive_name"
                                           id="txt_acquiring_sales_executive_name"
                                           value="{{ agent_profile.additional.acquiring_sale_executive_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Acquiring Sales Executive ID</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="acquiring_sales_executive_id"
                                           id="txt_acquiring_sales_executive_id"
                                           value="{{ agent_profile.additional.acquiring_sale_executive_id|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Relationship Manager Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="relationship_manager_name"
                                           id="txt_relationship_manager_name"
                                           value="{{ agent_profile.additional.relationship_manager_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Relationship Manager ID</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="relationship_manager_id"
                                           id="txt_relationship_manager_id"
                                           value="{{ agent_profile.additional.relationship_manager_id|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Sales Region</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="sales_region"
                                           id="txt_sales_region"
                                           value="{{ agent_profile.additional.sale_region|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Commercial Account Manager</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded"
                                           name="commercial_account_manager"
                                           id="txt_commercial_account_manager"
                                           value="{{ agent_profile.additional.commercial_account_manager|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Profile Picture</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="profile_picture"
                                           id="txt_profile_picture"
                                           value="{{ agent_profile.additional.profile_picture_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">National ID Photo</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="national_id_photo"
                                           id="txt_national_id_photo"
                                           value="{{ agent_profile.additional.national_id_photo_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Tax ID Card Photo</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="tax_id_card_photo"
                                           id="txt_tax_id_card_photo"
                                           value="{{ agent_profile.additional.tax_id_card_photo_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>
                        <hr/>

                        <!-- Begin section 7 Custom Fields -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-title"><h4>Custom Fields</h4></label>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="col-sm-4 control-label"></label>
                                <div class="col-sm-8">
                                    <button type="button" class="btn-arrow-down collapsible-button" style="outline: none;"><span style="position: relative;"><i class="balance-arrow fa fa-angle-up fa-2x" id="toggle-button"></i></span></button>
                                </div>
                            </div>
                        </div>

                        <div id="div-custom-field" class="collapsible">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 1 Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_1_name"
                                           id="txt_field_1_name"
                                           value="{{ agent_profile.additional.field_1_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 1 Value</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_1_value"
                                           id="txt_field_1_value"
                                           value="{{ agent_profile.additional.field_1_value|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 2 Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_2_name"
                                           id="txt_field_2_name"
                                           value="{{ agent_profile.additional.field_2_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 2 Value</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_2_value"
                                           id="txt_field_2_value"
                                           value="{{ agent_profile.additional.field_2_value|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 3 Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_3_name"
                                           id="txt_field_3_name"
                                           value="{{ agent_profile.additional.field_3_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 3 Value</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_3_value"
                                           id="txt_field_3_value"
                                           value="{{ agent_profile.additional.field_3_value|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 4 Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_4_name"
                                           id="txt_field_4_name"
                                           value="{{ agent_profile.additional.field_4_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 4 Value</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_4_value"
                                           id="txt_field_4_value"
                                           value="{{ agent_profile.additional.field_4_value|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 5 Name</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_5_name"
                                           id="txt_field_5_name"
                                           value="{{ agent_profile.additional.field_5_name|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Field 5 Value</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="field_5_value"
                                           id="txt_field_5_value"
                                           value="{{ agent_profile.additional.field_5_value|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Supporting File 1</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="supporting_file_1"
                                           id="txt_supporting_file_1"
                                           value="{{ agent_profile.additional.supporting_file_1_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Supporting File 2</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="supporting_file_2"
                                           id="txt_supporting_file_2"
                                           value="{{ agent_profile.additional.supporting_file_2_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Supporting File 3</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="supporting_file_3"
                                           id="txt_supporting_file_3"
                                           value="{{ agent_profile.additional.supporting_file_3_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Supporting File 4</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="supporting_file_4"
                                           id="txt_supporting_file_4"
                                           value="{{ agent_profile.additional.supporting_file_4_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Supporting File 5</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control input-rounded" name="supporting_file_5"
                                           id="txt_supporting_file_5"
                                           value="{{ agent_profile.additional.supporting_file_5_url|default_if_none:'' }}"/>
                                </div>
                            </div>
                        </div>

                        <input name="previous_page" value="{{ request.META.HTTP_REFERER }}" hidden/>
                        <div class="pull-right">
                            <a href="{{ request.META.HTTP_REFERER }}">
                                <input id="btn_cancel" class="btn btn-cancel text-left mb15" type="button"
                                       value="Cancel"/>
                            </a>
                            {% if request.user|has_permission_name:"CAN_DELETE_AGENT" %}
                                <a href="{% url 'agents:agent_delete' agent_profile.id %}">
                                    <input id="btn_delete"
                                           class="btn btn-danger text-left mb15 {{ agent.is_deleted|yesno:"hidden,no-hidden" }}"
                                           type="button" value="Delete"/>
                                </a>
                            {% endif %}
                            <a>
                                <input id="btn_save" class="btn btn-success text-left mb15" type="submit" value="Save"/>
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body_js %}
    {{ block.super }}
    <script>
        $('#chk_permanent_address').change(function () {
            if ($('#chk_permanent_address').is(':checked')) {
                $('#div-permanent-address').hide();
            } else {
                $('#div-permanent-address').show();
            }
        });

        var dtp_birth_date = document.getElementById('dtp_birth_date');

        function VerifyDate(element) {
            var today = new Date();
            today.setHours(0, 0, 0, 0);
            if (new Date(element.value) >= today) {
                dtp_birth_date.setCustomValidity('Date of birth must be less than today date.');
                return false;
            } else {
                dtp_birth_date.setCustomValidity('');
                return true;
            }
            return true;
        }

        function loadMMCardLevel() {
            var $ele = $('#ddl_mm_card_types');
            var cardTypeId = $ele.val();
            var url = $ele.data('url');
            $('#ddl_mm_card_levels').empty();
            $('#ddl_mm_card_levels').append('<option value="">-</option>');
            if (cardTypeId) {
                $.ajax({
                    url: url,
                    type: "POST",
                    data: {
                        card_type_id: cardTypeId
                    },
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
                    },
                    success: function (response) {
                        if (response.status == 1) {
                            // Logout
                            var url = window.location.origin + "/admin-portal/authentications/login/?next=" + window.location.pathname;
                            window.location.replace(url);
                        } else if (response.status == 2) {
                            var data = response.data;
                            if(typeof data.length !== 'undefined') {
                                $.each(data, function(key, value) {
                                    $('#ddl_mm_card_levels').append('<option value="' + value.id + '">' + value.level + '</option>');
                            });}
                        } else {}
                    },
                    error: function (msg) {}
                });
            }
        }
        //loadMMCardLevel();

        $(document).ready(function (e) {
            $('.collapsible-button').on('click', function (e) {
                var $section = $(this).closest('div.row').next('div.collapsible');
                var $angle = $(this).find("#toggle-button");
                if ($angle.hasClass("fa-angle-down")) {
                    $angle.removeClass("fa-angle-down");
                    $angle.addClass("fa-angle-up");
                    $section.show();
                } else {
                    $angle.removeClass("fa-angle-up");
                    $angle.addClass("fa-angle-down");
                    $section.hide();
                }
            });
        });
    </script>
{% endblock %}